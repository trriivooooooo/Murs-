<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>nuclear executor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
    <style>
        :root {
            --bg-dark: #0f0f13;
            --card-bg: #1e1e26;
            --accent-yellow: #f1c40f;
            --accent-pink: #e84393;
            --accent-purple: #6c5ce7;
            --text-main: #ffffff;
            --code-bg: #15151b;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: radial-gradient(circle at center, #1a101d 0%, #0f0f13 100%);
            margin: 0; color: var(--text-main);
            height: 100vh; display: flex; justify-content: center; align-items: center;
            overflow: hidden;
        }

        /* Access Denied Overlay */
        #denied-overlay {
            position: fixed; inset: 0; background: var(--bg-dark);
            display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 1000;
        }

        .container {
            width: 95%; max-width: 1000px; height: 85vh;
            background: var(--card-bg); border-radius: 20px;
            display: flex; flex-direction: column; overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.7); border: 1px solid rgba(255,255,255,0.1);
        }

        .header { height: 6px; display: flex; }
        .h-strip { flex: 1; }

        .toolbar {
            padding: 15px 25px; display: flex; justify-content: space-between; align-items: center;
            background: rgba(0,0,0,0.2); border-bottom: 1px solid rgba(255,255,255,0.05);
        }

        /* Editor Area */
        .editor-wrapper {
            position: relative; flex-grow: 1; overflow: hidden;
            background: var(--code-bg); margin: 15px; border-radius: 10px;
        }

        #editing, #highlighting {
            margin: 0; padding: 15px; border: 0;
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            tab-size: 4; font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 14px; line-height: 20px;
            white-space: pre; overflow: auto; box-sizing: border-box;
        }

        #editing {
            color: transparent; background: transparent;
            caret-color: white; z-index: 1; resize: none; outline: none;
        }

        #highlighting { pointer-events: none; z-index: 0; }

        /* Buttons */
        .btn-group { display: flex; gap: 10px; }
        .btn {
            padding: 8px 18px; border-radius: 6px; border: none;
            font-weight: 600; cursor: pointer; transition: 0.2s;
            font-size: 12px; text-transform: uppercase;
        }
        .btn-run { background: var(--accent-purple); color: white; }
        .btn-save { background: #27ae60; color: white; }
        .btn-load { background: #444; color: white; }
        .btn:hover { transform: translateY(-1px); filter: brightness(1.2); }

        #fileInput { display: none; }
        .status-bar { padding: 5px 25px; font-size: 11px; color: #666; background: #15151b; }
    </style>
</head>
<body oncontextmenu="return false;">

    <div id="denied-overlay"><h1>ACCESS DENIED</h1></div>

    <div class="container">
        <div class="header">
            <div class="h-strip" style="background: var(--accent-yellow)"></div>
            <div class="h-strip" style="background: var(--accent-pink)"></div>
            <div class="h-strip" style="background: var(--accent-purple)"></div>
        </div>

        <div class="toolbar">
            <div>
                <span style="font-weight: bold; letter-spacing: 1px;">just execute code</span>
                <span id="filename-display" style="margin-left: 15px; color: var(--accent-yellow); font-size: 12px;">untitled.html</span>
            </div>
            <div class="btn-group">
                <button class="btn btn-load" onclick="document.getElementById('fileInput').click()">load file</button>
                <button class="btn btn-run" onclick="executeBlob()">â–¶ Run</button>
                <button class="btn btn-save" onclick="downloadFile()">ðŸ’¾ Save</button>
            </div>
            <input type="file" id="fileInput" accept=".html" onchange="loadFile(this)" />
        </div>

        <div class="editor-wrapper">
            <textarea id="editing" spellcheck="false" oninput="updateEditor(this.value); syncScroll(this);" onscroll="syncScroll(this)"></textarea>
            <pre id="highlighting" aria-hidden="true"><code class="language-html" id="highlighting-content"></code></pre>
        </div>

        <div class="status-bar" id="status">Ready â€¢ UTF-8 â€¢ HTML Mode by Jayden all rights reserved!</div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-markup.min.js"></script>

    <script>
        const editArea = document.getElementById('editing');
        const highlightArea = document.getElementById('highlighting-content');
        const displayFile = document.getElementById('filename-display');
        let currentFileName = "index.html";

        // --- 1. SYNC & HIGHLIGHT LOGIC ---
        function updateEditor(text) {
            // Replace brackets for HTML safety in the highlight layer
            let result = text.replace(/&/g, "&amp;").replace(/</g, "&lt;");
            highlightArea.innerHTML = result;
            Prism.highlightElement(highlightArea);
        }

        function syncScroll(el) {
            document.getElementById('highlighting').scrollTop = el.scrollTop;
            document.getElementById('highlighting').scrollLeft = el.scrollLeft;
        }

        // Handle Tab key
        editArea.onkeydown = function(e) {
            if(e.key == "Tab") {
                e.preventDefault();
                let s = this.selectionStart;
                this.value = this.value.substring(0, s) + "    " + this.value.substring(this.selectionEnd);
                this.selectionEnd = s + 4;
                updateEditor(this.value);
            }
        };

        // --- 2. FILE OPS ---
        function loadFile(input) {
            const file = input.files[0];
            if (file) {
                currentFileName = file.name;
                displayFile.innerText = currentFileName;
                const reader = new FileReader();
                reader.onload = (e) => {
                    editArea.value = e.target.result;
                    updateEditor(e.target.result);
                };
                reader.readAsText(file);
            }
        }

        function executeBlob() {
            const blob = new Blob([editArea.value], { type: 'text/html' });
            window.open(URL.createObjectURL(blob));
        }

        function downloadFile() {
            const blob = new Blob([editArea.value], { type: 'text/html' });
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = currentFileName;
            a.click();
        }

        // --- 3. AUTH & INIT ---
        function checkAuth() {
            if (localStorage.getItem('isUnlocked') !== 'true') {
                document.getElementById('denied-overlay').style.display = 'flex';
            }
        }

        // Initialize with boilerplate
        const starter = `<!DOCTYPE html>\n<html>\n<head>\n  <style>\n    body { background: #111; color: #fff; font-family: sans-serif; text-align: center; padding-top: 50px; }\n  </style>\n</head>\n<body>\n  <h1>New Project</h1>\n  <p>Edit the code and click RUN.</p>\n</body>\n</html>`;
        editArea.value = starter;
        updateEditor(starter);
        checkAuth();
    </script>
</body>
</html>

